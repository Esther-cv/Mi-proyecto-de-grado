<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Mario MatemÃ¡tico</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- ğŸµ MÃºsica de fondo -->
  <audio id="musicaFondo" autoplay loop>
    <source src="audio de fondo (2).mp3" type="audio/mpeg">
    Tu navegador no soporta el elemento de audio.
  </audio>

  <header>
    <div class="logo-contenedor">
      <img src="logotipo.jpg" alt="Logo E&E MATH GAMES" class="logo">
      <h1>ğŸ® Mario MatemÃ¡tico</h1>
      <p class="descripcion">
        Responde las operaciones matemÃ¡ticas y ayuda a Mario a superar los niveles.
      </p>
    </div>
  </header>

  <main>
    <!-- ğŸ”¹ Pantalla de Registro (Ãºnica visible al inicio) -->
    <section id="pantallaInicio">
      <h2>Registro</h2>
      <input type="text" id="nombreJugador" placeholder="Escribe tu nombre" />
      <br />
      <button id="btnRegistrar">Registrar</button>
    </section>

    <!-- ğŸ”¹ Pantalla de Instrucciones (se muestra despuÃ©s de registrarse) -->
    <section id="pantallaInstrucciones" class="oculto">
      <h2>ğŸ“– Â¿CÃ³mo Jugar?</h2>
      <ul class="instrucciones-lista">
        <li>ğŸ¯ <strong>Objetivo:</strong> Completa los 20 niveles respondiendo operaciones matemÃ¡ticas correctamente.</li>
        <li>â¤ï¸ <strong>Vidas:</strong> Tienes 3 vidas. Si te equivocas, pierdes una vida.</li>
        <li>ğŸƒ <strong>Movimiento:</strong> Usa las flechas â† â†’ para mover a Mario.</li>
        <li>â¬†ï¸ <strong>Saltar:</strong> Presiona ESPACIO o flecha â†‘ para saltar.</li>
        <li>ğŸ“¦ <strong>Bloques:</strong> Golpea los bloques amarillos desde abajo para activar una pregunta.</li>
        <li>ğŸ§® <strong>Responde:</strong> Escribe la respuesta correcta y presiona Enter.</li>
        <li>â­ <strong>Puntos:</strong> Cada respuesta correcta te da 10 puntos.</li>
      </ul>
      <button id="btnComenzar">Â¡Comenzar Juego!</button>
    </section>

    <!-- ğŸ”¹ Pantalla del Mapa de Niveles (oculta al inicio) -->
    <section id="pantallaMapa" class="oculto pantalla">
      <div class="mapa-cuadro">
        <h2>ğŸ“˜ Mapa de Niveles</h2>

        <div id="nivelesContainer" class="niveles-grid">
          <button class="nivel activo">1</button>
          <button class="nivel bloqueado" disabled>2</button>
          <button class="nivel bloqueado" disabled>3</button>
          <button class="nivel bloqueado" disabled>4</button>
          <button class="nivel bloqueado" disabled>5</button>
          <button class="nivel bloqueado" disabled>6</button>
          <button class="nivel bloqueado" disabled>7</button>
          <button class="nivel bloqueado" disabled>8</button>
          <button class="nivel bloqueado" disabled>9</button>
          <button class="nivel bloqueado" disabled>10</button>
          <button class="nivel bloqueado" disabled>11</button>
          <button class="nivel bloqueado" disabled>12</button>
          <button class="nivel bloqueado" disabled>13</button>
          <button class="nivel bloqueado" disabled>14</button>
          <button class="nivel bloqueado" disabled>15</button>
          <button class="nivel bloqueado" disabled>16</button>
          <button class="nivel bloqueado" disabled>17</button>
          <button class="nivel bloqueado" disabled>18</button>
          <button class="nivel bloqueado" disabled>19</button>
          <button class="nivel bloqueado" disabled>20</button>
        </div>

        <div class="progreso">
          <label>Progreso Total:</label>
          <progress id="barraProgreso" value="0" max="100"></progress>
        </div>

        <div class="botonesMapa">
          <button id="btnIniciarJuego" class="btn-iniciar">Iniciar</button>
          <button id="btnVolverMenu" class="btn-volver">Volver al MenÃº</button>
        </div>
      </div>
    </section>

    <!-- ğŸ”¹ Info del jugador -->
    <section id="infoJugador" class="oculto">
      <p id="saludo">ğŸ‘‹ Hola</p>
      <p>ğŸ¯ Puntos: <span id="puntos">0</span></p>
      <p>ğŸ† Record: <span id="record">0</span></p>
      <p>ğŸ“ˆ Nivel: <span id="nivel">1</span> / 20</p>
      <p>â¤ï¸ Vidas: <span id="vidasDisplay">3</span></p>
      <button id="btnJugar">Â¡Jugar!</button>
    </section>

    <!-- ğŸ”¹ Contenedor del juego -->
    <section id="contenedorJuego" class="oculto">
      <h2 class="tituloJuego">ğŸ® Mario MatemÃ¡tico</h2>
      <div class="statsBar">
        <span>ğŸ‘¤ <strong id="nombreEnJuego"></strong></span>
        <span>ğŸ“ˆ Nivel: <strong id="nivelEnJuego">1</strong>/20</span>
        <span>ğŸ¯ Puntos: <strong id="puntosEnJuego">0</strong></span>
        <span id="vidasEnJuego">
          <span class="vida">â¤ï¸</span>
          <span class="vida">â¤ï¸</span>
          <span class="vida">â¤ï¸</span>
        </span>
      </div>
      <div id="game">
        <div id="escenario">
          <div id="suelo"></div>
        </div>
        <div id="mario"></div>
        <div id="mensaje"></div>
        <div id="preguntaBox" class="oculto">
          <p id="preguntaTexto"></p>
          <input type="text" id="inputRespuesta" placeholder="Tu respuesta" />
          <br />
          <button id="btnResponder">Responder</button>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>Â© 2025 E&E MATH GAMES</p>
    <p><a href="https://www.tiktok.com/@math.games1?_r=1&_t=ZM-91SZRQjNQAW" target="_blank">Contacto</a>
| <a href="https://github.com/Esther-cv">Sitio Oficial</a></p>
  </footer>

  <!-- =========================
       CONTROLES TÃCTILES (AGREGADOS)
       ========================= -->
  <div id="controlesTouch" class="oculto" aria-hidden="true">
    <button id="btnIzquierda" class="btn-control" aria-label="mover izquierda">âŸµ</button>
    <button id="btnSaltar" class="btn-control" aria-label="saltar">âŸ°</button>
    <button id="btnDerecha" class="btn-control" aria-label="mover derecha">âŸ¶</button>
  </div>

  <script>
    // === Volver al menÃº (registro) ===
    const btnVolverMenu = document.getElementById("btnVolverMenu");
    const pantallaMapa = document.getElementById("pantallaMapa");
    const pantallaInicio = document.getElementById("pantallaInicio");

    if (btnVolverMenu) {
      btnVolverMenu.addEventListener("click", () => {
        pantallaMapa.classList.add("oculto");
        pantallaInicio.classList.remove("oculto");
      });
    }
  </script>

  <script src="game.js"></script>
</body>
</html>
